"use strict";(self.webpackChunkapio_core=self.webpackChunkapio_core||[]).push([[7535],{13647:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>h,default:()=>a,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var r=t(85893),n=t(11151);const i={sidebar_position:1},h="Requests",d={id:"history/requests",title:"Requests",description:"Every request sent to APIO core is logged in the database. So a user can see the history of the requests. Search for activities or issues and see the details of each request.",source:"@site/docs/history/requests.md",sourceDirName:"history",slug:"/history/requests",permalink:"/apio-core-docs/docs/history/requests",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"History",permalink:"/apio-core-docs/docs/category/history"},next:{title:"Scheduled jobs",permalink:"/apio-core-docs/docs/history/scheduled_jobs"}},o={},l=[{value:"Search",id:"search",level:2},{value:"Request details",id:"request-details",level:2},{value:"Request",id:"request",level:3},{value:"Workflow",id:"workflow",level:3},{value:"Workflow details",id:"workflow-details",level:4},{value:"Messages",id:"messages",level:4},{value:"Sub workflows",id:"sub-workflows",level:4},{value:"Errors",id:"errors",level:4},{value:"Events",id:"events",level:4},{value:"Proxied request details",id:"proxied-request-details",level:2}];function c(e){const s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"requests",children:"Requests"}),"\n",(0,r.jsx)(s.p,{children:"Every request sent to APIO core is logged in the database. So a user can see the history of the requests. Search for activities or issues and see the details of each request."}),"\n",(0,r.jsx)(s.h2,{id:"search",children:"Search"}),"\n",(0,r.jsx)(s.p,{children:"The possible search criteria are (they can be influenced by the combination of modules activated in the GUI section of the configuration):"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Workflow"}),": The activity of the request."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Owner"}),": The user who triggered the request."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Workflow status"}),": The status of the workflow (this is an internal status indicating if the workflow is either ",(0,r.jsx)(s.code,{children:"active"}),", ",(0,r.jsx)(s.code,{children:"completed"})," or ",(0,r.jsx)(s.code,{children:"completed with errors"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Request status"}),": The status of the request. (this is a status which can be set by the workflow itself)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Pending action role"}),": The role of the user who should perform an action on the request."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Tenant ID"}),": When integrated with Broadsoft, the tenant ID is the Broadsoft enterprise ID."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Site ID"}),": When integrated with Broadsoft, the site ID is the Broadsoft group ID."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Number"}),": When integrated with Broadsoft, the number is the Broadsoft user ID."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Proxy host"}),": The host of the proxy used to process the request."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Proxy status"}),": The HTTP status code of the proxy response."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Proxy URL"}),": The URL called on the proxy process."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Proxy method"}),": The HTTP method of the proxy request."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Created on"}),": The date when the request was created."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"With tasks in error"}),": The request contains tasks in error."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"With 'end' in error"}),": The request contains an 'end' task in error."]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"info",children:(0,r.jsx)(s.p,{children:"When the Broadsfot integration is enabled, and the request is not overloaded by custom routes, the request is proxied and doesn't trigger any workflow instance. In this case, it has no workflow."})}),"\n",(0,r.jsx)(s.h2,{id:"request-details",children:"Request details"}),"\n",(0,r.jsx)(s.p,{children:"Every calls to custom routes (public or not) are logged in the database. So a user can see the details of the requests and their execution."}),"\n",(0,r.jsx)(s.p,{children:"Details are split in 2 tabs"}),"\n",(0,r.jsx)(s.h3,{id:"request",children:"Request"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"Request details",src:t(16413).Z+"",width:"1363",height:"476"})}),"\n",(0,r.jsx)(s.p,{children:"The request is displayed in a JSON viewer with at least the following attributes."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Attribute"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"body"})}),(0,r.jsx)(s.td,{children:"The body of the request. (The body is represented in a base64 encoded format if it is not a JSON)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"content_type"})}),(0,r.jsx)(s.td,{children:"The content type of the request."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"match_info"})}),(0,r.jsx)(s.td,{children:"The parameters extracted from the URL match."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"method"})}),(0,r.jsx)(s.td,{children:"The HTTP method of the request."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"params"})}),(0,r.jsx)(s.td,{children:"The query string of the URL request."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"tail"})}),(0,r.jsx)(s.td,{children:"The tail of the URL request. (the part of the URL path after the prefix)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"url"})}),(0,r.jsx)(s.td,{children:"The URL of the request."})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"On the right side of the JSON viewer, there is a set of buttons to"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Force close / Reopen"}),": Forcibly close the instance or reopen it."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Request as JSON"}),": Download the request as a JSON file."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Context as JSON"}),": Download the context as a JSON file."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Auto-refresh"}),": Enable or disable the auto-refresh of the request / workflow details."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Then there is a table with the context of the instance. The instance context refer to the context of the workflow instance. It is a set of key-value pairs that can be used by the workflow to store data during its execution. (sensitive data like passwords, tokens etc... are hidden)"}),"\n",(0,r.jsx)(s.h3,{id:"workflow",children:"Workflow"}),"\n",(0,r.jsx)(s.p,{children:"The details of the workflow execution starting with a summary."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"instance summary",src:t(81625).Z+"",width:"712",height:"437"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Attribute"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"ID"})}),(0,r.jsx)(s.td,{children:"The sequential ID of the workflow instance."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Workflow"})}),(0,r.jsx)(s.td,{children:"The name of the workflow executed."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Owner"})}),(0,r.jsx)(s.td,{children:"The user who triggered the workflow (empty when the route is public)."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Request status"})}),(0,r.jsx)(s.td,{children:"The status of the request. (this is a status which can be set by the workflow itself)."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Workflow status"})}),(0,r.jsxs)(s.td,{children:["The status of the workflow (this is an internal status indicating if the workflow is either ",(0,r.jsx)(s.code,{children:"ACTIVE"}),", ",(0,r.jsx)(s.code,{children:"CLOSED_IN_SUCCESS"})," or ",(0,r.jsx)(s.code,{children:"CLOSED_IN_ERRORS"}),")."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Creation date"})}),(0,r.jsx)(s.td,{children:"The date when the workflow instance was created."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Last update"})}),(0,r.jsx)(s.td,{children:"The date when the workflow instance was last updated."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Errors"})}),(0,r.jsx)(s.td,{children:"The number of errors in the workflow instance."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"GUID"})}),(0,r.jsx)(s.td,{children:"The GUID of the workflow instance."})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"workflow-details",children:"Workflow details"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"instance details",src:t(11102).Z+"",width:"1380",height:"688"})}),"\n",(0,r.jsx)(s.p,{children:"The execution of the workflow is displayed in the form of the workflow editor. The nodes are displayed with their status and the links are colored with their status."}),"\n",(0,r.jsx)(s.p,{children:"The workflow viewer is interactive. The user can double click on the nodes to see their details. But they can't be edited."}),"\n",(0,r.jsx)(s.p,{children:"It also contains a set of buttons to"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"zoom in/out"})}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"txt"}),": see the workflow definition as a text (JSON representation)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"def"}),": open the workflow definition in the workflow editor."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"download"}),": update the workflow definition with the current active definition."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Then there is a table with the list of tasks executed and their execution status."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Attribute"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Cell"})}),(0,r.jsx)(s.td,{children:"The name of the task."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Status"})}),(0,r.jsx)(s.td,{children:"The status of the task."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Output"})}),(0,r.jsx)(s.td,{children:"The output of the task."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Created"})}),(0,r.jsx)(s.td,{children:"The date when the task was created."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Updated"})}),(0,r.jsx)(s.td,{children:"The date when the task was last updated."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Runtime"})}),(0,r.jsx)(s.td,{children:"The duration of the task."})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"messages",children:"Messages"}),"\n",(0,r.jsx)(s.p,{children:"When there is a message exchanged by a node, it is displayed in the messages tab."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"instance messages",src:t(49817).Z+"",width:"884",height:"171"})}),"\n",(0,r.jsx)(s.p,{children:"Every entries contain the details of the request and response in a JSON form."}),"\n",(0,r.jsx)(s.admonition,{type:"info",children:(0,r.jsx)(s.p,{children:"In the case of a message exchanged with Broadsoft through the Broadsoft gateway, the details are enriched with the OCI exchanges."})}),"\n",(0,r.jsx)(s.h4,{id:"sub-workflows",children:"Sub workflows"}),"\n",(0,r.jsx)(s.p,{children:"When there is a sub workflow executed, it is displayed in the sub workflows panel."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"instance sub workflows",src:t(50058).Z+"",width:"1231",height:"177"})}),"\n",(0,r.jsx)(s.p,{children:"Sub instances can be filtered with the following criteria:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"all"}),": All sub instances."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"active"}),": Only the active sub instances."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"active & blocked"}),": Only the active and blocked sub instances."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Then an action can be performed on the selected sub instances:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"replay"}),": Replay the tasks in error in the selected sub instances."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"skip"}),": Skip the the tasks in error in the selected sub instances."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"force close"}),": Force close the selected sub instances."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"errors",children:"Errors"}),"\n",(0,r.jsx)(s.p,{children:"When there is an error in the workflow, a panel is displayed with the details of the error."}),"\n",(0,r.jsx)(s.h4,{id:"events",children:"Events"}),"\n",(0,r.jsx)(s.p,{children:"A panel is displayed with the list of events received by the workflow. This can be useful to debug the workflow."}),"\n",(0,r.jsx)(s.h2,{id:"proxied-request-details",children:"Proxied request details"}),"\n",(0,r.jsx)(s.p,{children:"Because there is no workflow executed on this request, the view is very simplified."})]})}function a(e={}){const{wrapper:s}={...(0,n.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},16413:(e,s,t)=>{t.d(s,{Z:()=>r});const r=t.p+"assets/images/request_inst_details-803176c61f188a7f478aade919b9c9e7.png"},11102:(e,s,t)=>{t.d(s,{Z:()=>r});const r=t.p+"assets/images/request_inst_workflow_details-345afb074bdf8b43671d7a6bfc480146.png"},49817:(e,s,t)=>{t.d(s,{Z:()=>r});const r=t.p+"assets/images/request_inst_workflow_messages-2c5704170deb0d62e2ec7c42f7827ec4.png"},50058:(e,s,t)=>{t.d(s,{Z:()=>r});const r=t.p+"assets/images/request_inst_workflow_subinst-92161ffc7b7f7863afcce2c7cd44356c.png"},81625:(e,s,t)=>{t.d(s,{Z:()=>r});const r=t.p+"assets/images/request_inst_workflow_summary-cc9f7d2fd5a169b608273267310e4916.png"},11151:(e,s,t)=>{t.d(s,{Z:()=>d,a:()=>h});var r=t(67294);const n={},i=r.createContext(n);function h(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:h(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);