"use strict";(self.webpackChunkapio_core=self.webpackChunkapio_core||[]).push([[822],{67261:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var n=i(85893),a=i(11151);const s={sidebar_position:1},o="HTTP clients (a.k.a Gateways)",c={id:"configuration/gateways",title:"HTTP clients (a.k.a Gateways)",description:"APIO core engine can keep client sessions with multiple servers. Each client is identified by a unique name. The session_holder name is used to identify the client in the HTTP calls nodes (e.g HTTP call node).",source:"@site/docs/configuration/gateways.md",sourceDirName:"configuration",slug:"/configuration/gateways",permalink:"/apio-core-docs/docs/configuration/gateways",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Configuration",permalink:"/apio-core-docs/docs/category/configuration"},next:{title:"TCP",permalink:"/apio-core-docs/docs/configuration/tcp"}},r={},l=[{value:"Health checks",id:"health-checks",level:2},{value:"Authentication methods",id:"authentication-methods",level:2},{value:"OAuth1",id:"oauth1",level:3},{value:"OAuth2",id:"oauth2",level:3},{value:"Basic",id:"basic",level:3},{value:"Bearer",id:"bearer",level:3},{value:"Hawk",id:"hawk",level:3},{value:"mTLS",id:"mtls",level:3},{value:"Failover",id:"failover",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"http-clients-aka-gateways",children:"HTTP clients (a.k.a Gateways)"}),"\n",(0,n.jsxs)(t.p,{children:["APIO core engine can keep client sessions with multiple servers. Each client is identified by a unique name. The ",(0,n.jsx)(t.code,{children:"session_holder"})," name is used to identify the client in the HTTP calls nodes (e.g ",(0,n.jsx)(t.a,{href:"../workflows/nodes#http-call",children:"HTTP call node"}),")."]}),"\n",(0,n.jsx)(t.p,{children:"This is useful to keep the client configuration in one place and reuse it in multiple places. And efficient because it allows to reuse the same client session / connections for multiple calls across workflows."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"HTTP client",src:i(34718).Z+"",width:"907",height:"1527"})}),"\n",(0,n.jsx)(t.h2,{id:"health-checks",children:"Health checks"}),"\n",(0,n.jsxs)(t.p,{children:["If enabled, the health check is executed periodically. The health check is a simple HTTP call to the ",(0,n.jsx)(t.code,{children:"health_check_url"}),". If the call fails, the client is marked as unhealthy (on the dashboard and gateways page) and backup url's may be used as failover."]}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsx)(t.p,{children:"Unhealthy clients are still used in the HTTP calls nodes."})}),"\n",(0,n.jsx)(t.h2,{id:"authentication-methods",children:"Authentication methods"}),"\n",(0,n.jsx)(t.h3,{id:"oauth1",children:"OAuth1"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://oauth.net/core/1.0a/",children:"OAuth1"})," is an open standard for access delegation, commonly used as a way for Internet users to grant websites or applications access to their information on other websites but without giving them the passwords."]}),"\n",(0,n.jsx)(t.h3,{id:"oauth2",children:"OAuth2"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://oauth.net/2/",children:"OAuth2"})," is an authorization framework that enables a third-party application to obtain access to an HTTP service, either on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP service, or by allowing the third-party application to obtain access on its own behalf."]}),"\n",(0,n.jsxs)(t.p,{children:["Set the token URL in the ",(0,n.jsx)(t.code,{children:"login url"})," attribute. The ",(0,n.jsx)(t.code,{children:"client id"})," and ",(0,n.jsx)(t.code,{children:"client secret"})," (or ",(0,n.jsx)(t.code,{children:"username"})," and ",(0,n.jsx)(t.code,{children:"password"}),") attributes are used to authenticate the client to the token URL."]}),"\n",(0,n.jsx)(t.h3,{id:"basic",children:"Basic"}),"\n",(0,n.jsxs)(t.p,{children:["For basic authentication, use the ",(0,n.jsx)(t.code,{children:"username"})," and ",(0,n.jsx)(t.code,{children:"password"})," attributes."]}),"\n",(0,n.jsx)(t.h3,{id:"bearer",children:"Bearer"}),"\n",(0,n.jsxs)(t.p,{children:["For fixed bearer token, use the ",(0,n.jsx)(t.code,{children:"headers"})," attribute to set the ",(0,n.jsx)(t.code,{children:"Authorization"})," header."]}),"\n",(0,n.jsx)(t.h3,{id:"hawk",children:"Hawk"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://blog.mozilla.org/services/2015/02/05/whats-hawk-and-how-to-use-it/",children:"Hawk"})," is a HTTP authentication scheme using a message authentication code (MAC) algorithm to provide partial HTTP request cryptographic verification."]}),"\n",(0,n.jsx)(t.h3,{id:"mtls",children:"mTLS"}),"\n",(0,n.jsx)(t.p,{children:"Mutual TLS authentication is a two-way SSL authentication that uses client certificates to authenticate the client to the server and the server to the client."}),"\n",(0,n.jsxs)(t.p,{children:["If the client ",(0,n.jsx)(t.code,{children:"url"})," starts with ",(0,n.jsx)(t.code,{children:"https://"}),", the client can use mTLS authentication using the ",(0,n.jsx)(t.code,{children:"TLS client certificate"})," and ",(0,n.jsx)(t.code,{children:"TLS client key"})," attributes (both in PEM format)."]}),"\n",(0,n.jsx)(t.h2,{id:"failover",children:"Failover"}),"\n",(0,n.jsxs)(t.p,{children:["If ",(0,n.jsx)(t.code,{children:"backup urls"})," is set, the client will try to connect to the backup URLs if the main URL is not available."]}),"\n",(0,n.jsx)(t.p,{children:"Those url's are used in the order they are defined. If the first one is not available, the second one is used, and so on."}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsx)(t.p,{children:"The backup URLs are used only if the main URL is not available. If the main URL is available but returns an error, the backup URLs are not used."})}),"\n",(0,n.jsx)(t.admonition,{type:"caution",children:(0,n.jsx)(t.p,{children:"If an error occurs during the connection to the current URL, the client will not try to fallback to the next backup URLs for the same call. It will try to fallback to the next backup URLs only for the next calls."})})]})}function d(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},34718:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/new-gateway-b561c2f3815c57fa4684e7424543b335.png"},11151:(e,t,i)=>{i.d(t,{a:()=>o});var n=i(67294);const a={},s=n.createContext(a);function o(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}}}]);