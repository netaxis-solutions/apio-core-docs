"use strict";(self.webpackChunkapio_core=self.webpackChunkapio_core||[]).push([[7324],{22700:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var r=s(85893),t=s(11151);const o={sidebar_position:1},i="Setup",a={id:"administration/setup",title:"Setup",description:"Requirements",source:"@site/docs/administration/setup.md",sourceDirName:"administration",slug:"/administration/setup",permalink:"/apio-core-docs/docs/administration/setup",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Administration",permalink:"/apio-core-docs/docs/category/administration"},next:{title:"Server configuration",permalink:"/apio-core-docs/docs/administration/server_configuration"}},c={},l=[{value:"Requirements",id:"requirements",level:2},{value:"Installation",id:"installation",level:2},{value:"docker-compose",id:"docker-compose",level:3},{value:"Time to start",id:"time-to-start",level:2},{value:"The Docker way",id:"the-docker-way",level:3},{value:"Create the first superuser",id:"create-the-first-superuser",level:2},{value:"The Docker way",id:"the-docker-way-1",level:3},{value:"Put the instance down",id:"put-the-instance-down",level:2},{value:"The Docker way",id:"the-docker-way-2",level:3},{value:"Restart the instance",id:"restart-the-instance",level:2},{value:"The Docker way",id:"the-docker-way-3",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,r.jsx)(n.p,{children:"APIO core platform is a set of microservices that can be deployed on a single server or on multiple servers."}),"\n",(0,r.jsx)(n.p,{children:"The following requirements are for a single server deployment:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"4 CPU cores"}),"\n",(0,r.jsx)(n.li,{children:"16 GB RAM"}),"\n",(0,r.jsx)(n.li,{children:"50 GB disk space"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.p,{children:"You can install APIO core platform on multiple ways:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Using ",(0,r.jsx)(n.a,{href:"#docker-compose",children:"docker-compose"})," with the official ",(0,r.jsx)(n.a,{href:"https://",children:"docker images"})]}),"\n",(0,r.jsxs)(n.li,{children:["Using ",(0,r.jsx)(n.a,{href:"#deb-packages",children:"deb packages"})]}),"\n",(0,r.jsxs)(n.li,{children:["Using ",(0,r.jsx)(n.a,{href:"#rpm-packages",children:"rpm packages"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"docker-compose",children:"docker-compose"}),"\n",(0,r.jsxs)(n.p,{children:["The below ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/",children:"docker-compose"})," configuration can be used to start an APIO core server with a single proxy."]}),"\n",(0,r.jsxs)(n.p,{children:["It relies on a number of environment variables that you must set before running ",(0,r.jsx)(n.code,{children:"docker-compose up"}),". The variables are described below."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# docker-compose.yml\nversion: '3'\n\nservices:\n  nginx:\n    image: nginx:latest\n    ports:\n      - 80:80\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n    depends_on:\n      - apio\n      - px1\n    restart: always\n  \n  apio:\n    image: docker.bxl.netaxis.be/apio:latest\n    ports:\n      - 5000:5000\n    volumes:\n      - static-www:/usr/www\n    restart: always\n\n  px1:\n    image: docker.bxl.netaxis.be/px1:latest\n    ports:\n      - 5000:5000\n    restart: always\n\nvolumes:\n    static-www:\n"})}),"\n",(0,r.jsx)(n.p,{children:"If processes run nodes like docker containers they require access to the host machine's Docker daemon:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# docker-compose.yml\nversion: '3'\n\nservices:\n  [...]\n  apio:\n    [...]\n+   volumes:\n+     - /var/run/docker.sock:/var/run/docker.sock\n\n  px1:\n    [...]\n+   volumes:\n+     - /var/run/docker.sock:/var/run/docker.sock\n"})}),"\n",(0,r.jsx)(n.h2,{id:"time-to-start",children:"Time to start"}),"\n",(0,r.jsx)(n.h3,{id:"the-docker-way",children:"The Docker way"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ docker-compose up -d\n"})}),"\n",(0,r.jsx)(n.h2,{id:"create-the-first-superuser",children:"Create the first superuser"}),"\n",(0,r.jsx)(n.p,{children:"When the APIO core platform is started for the first time, you must create the first user. This user will be the administrator of the platform."}),"\n",(0,r.jsx)(n.h3,{id:"the-docker-way-1",children:"The Docker way"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ docker-compose run --rm core /usr/local/go/server -newsuperuser\n"})}),"\n",(0,r.jsx)(n.p,{children:"By default the username is 'netaxis'."}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsx)(n.p,{children:"The password is automatically generated and displayed in the console. You must copy it and store it in a safe place."})}),"\n",(0,r.jsx)(n.h2,{id:"put-the-instance-down",children:"Put the instance down"}),"\n",(0,r.jsx)(n.h3,{id:"the-docker-way-2",children:"The Docker way"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ docker-compose down -v\n"})}),"\n",(0,r.jsx)(n.h2,{id:"restart-the-instance",children:"Restart the instance"}),"\n",(0,r.jsx)(n.h3,{id:"the-docker-way-3",children:"The Docker way"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ docker-compose down -v; docker-compose up -d\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>i});var r=s(67294);const t={},o=r.createContext(t);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);