"use strict";(self.webpackChunkapio_core=self.webpackChunkapio_core||[]).push([[5699],{26731:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>_,contentTitle:()=>i,default:()=>l,frontMatter:()=>n,metadata:()=>a,toc:()=>p});var r=o(74848),s=o(28453);const n={sidebar_position:8},i="Prometheus metrics",a={id:"administration/prom_metrics",title:"Prometheus metrics",description:"APIO core exposes metrics in the Prometheus format on core process on port 9090. These metrics can be used to monitor the APIO core software at platform level (not process level).",source:"@site/docs/administration/prom_metrics.md",sourceDirName:"administration",slug:"/administration/prom_metrics",permalink:"/apio-core-docs/docs/administration/prom_metrics",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Local User",permalink:"/apio-core-docs/docs/administration/local_user"},next:{title:"Migrations",permalink:"/apio-core-docs/docs/migrations"}},_={},p=[{value:"Activation",id:"activation",level:2},{value:"Sample",id:"sample",level:2}];function c(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"prometheus-metrics",children:"Prometheus metrics"})}),"\n",(0,r.jsxs)(t.p,{children:["APIO core exposes metrics in the Prometheus format on core process on port ",(0,r.jsx)(t.code,{children:"9090"}),". These metrics can be used to monitor the APIO core software at platform level (not process level)."]}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsx)(t.p,{children:"The metrics are exposed on port 9090 with no authentication required. Be sure to protect this port from unauthorized access."})}),"\n",(0,r.jsx)(t.h2,{id:"activation",children:"Activation"}),"\n",(0,r.jsxs)(t.p,{children:["The metrics are enabled by adding the argument ",(0,r.jsx)(t.code,{children:"-metrics"})," to the core process command line."]}),"\n",(0,r.jsx)(t.h2,{id:"sample",children:"Sample"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:'curl http://<host>:9090/metrics\n# HELP apio_active_instances_total The total number of active instances\n# TYPE apio_active_instances_total gauge\napio_active_instances_total 12671\n# HELP apio_instances_errors The number of instances in error\n# TYPE apio_instances_errors gauge\napio_instances_errors 2\n# HELP apio_instances_per_workflow The number of instances per workflow\n# TYPE apio_instances_per_workflow gauge\napio_instances_per_workflow{workflow="debug_116"} 11429\napio_instances_per_workflow{workflow="debug_246"} 11\napio_instances_per_workflow{workflow="demo-sip777"} 2\napio_instances_per_workflow{workflow="nden_cb01"} 3\napio_instances_per_workflow{workflow="pxm_get_numbers"} 2\napio_instances_per_workflow{workflow="reporting_add_report"} 5\napio_instances_per_workflow{workflow="reporting_customer_reports"} 2\napio_instances_per_workflow{workflow="reporting_get_customer"} 1\napio_instances_per_workflow{workflow="reporting_get_report"} 47\napio_instances_per_workflow{workflow="reporting_list_report_history"} 2\napio_instances_per_workflow{workflow="reporting_run"} 1\napio_instances_per_workflow{workflow="user_services"} 7\n# HELP apio_reponse_time_avg The average response time over the last minute\n# TYPE apio_reponse_time_avg gauge\napio_reponse_time_avg 0\n# HELP apio_reponse_time_max The maximum response time over the last minute\n# TYPE apio_reponse_time_max gauge\napio_reponse_time_max 0\n# HELP apio_requests_http_status The number of HTTP status codes\n# TYPE apio_requests_http_status gauge\napio_requests_http_status{status="200"} 229\napio_requests_http_status{status="222"} 1\napio_requests_http_status{status="400"} 2\napio_requests_http_status{status="401"} 15\napio_requests_http_status{status="403"} 16\napio_requests_http_status{status="404"} 11\n# HELP apio_requests_total The number of requests\n# TYPE apio_requests_total gauge\napio_requests_total 294\n# HELP apio_users_total The total number of users\n# TYPE apio_users_total gauge\napio_users_total 15\n# HELP promhttp_metric_handler_requests_in_flight Current number of scrapes being served.\n# TYPE promhttp_metric_handler_requests_in_flight gauge\npromhttp_metric_handler_requests_in_flight 1\n# HELP promhttp_metric_handler_requests_total Total number of scrapes by HTTP status code.\n# TYPE promhttp_metric_handler_requests_total counter\npromhttp_metric_handler_requests_total{code="200"} 0\npromhttp_metric_handler_requests_total{code="500"} 0\npromhttp_metric_handler_requests_total{code="503"} 0\n'})})]})}function l(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,t,o)=>{o.d(t,{R:()=>i,x:()=>a});var r=o(96540);const s={},n=r.createContext(s);function i(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);