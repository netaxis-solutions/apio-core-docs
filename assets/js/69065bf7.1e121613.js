"use strict";(self.webpackChunkapio_core=self.webpackChunkapio_core||[]).push([[8328],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>y});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=a,y=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return n?r.createElement(y,i(i({ref:t},p),{},{components:n})):r.createElement(y,i({ref:t},p))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},57723:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const o={sidebar_position:2},i="Entities",s={unversionedId:"workflows/advanced/entities",id:"workflows/advanced/entities",title:"Entities",description:"Entities are special nodes that can be used to represent an external process or system which is not managed by APIO but which can interract with the workflow.",source:"@site/docs/workflows/advanced/entities.md",sourceDirName:"workflows/advanced",slug:"/workflows/advanced/entities",permalink:"/apio-core-docs/docs/workflows/advanced/entities",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Manual actions",permalink:"/apio-core-docs/docs/workflows/advanced/manual_actions"},next:{title:"Triggers",permalink:"/apio-core-docs/docs/category/triggers"}},l={},c=[{value:"Configuration",id:"configuration",level:2},{value:"Create a user",id:"create-a-user",level:3},{value:"Place an entity",id:"place-an-entity",level:3},{value:"Usage",id:"usage",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"entities"},"Entities"),(0,a.kt)("p",null,"Entities are special nodes that can be used to represent an external process or system which is not managed by APIO but which can interract with the workflow."),(0,a.kt)("p",null,"For instance, the workflow contacts some system to order a product. The system accept the order but will send a confirmation later. That confirmation can be provided to the workflow by an entity."),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("h3",{id:"create-a-user"},"Create a user"),(0,a.kt)("p",null,"To interract with APIO, a system needs to be authenticated. So a particular user is required."),(0,a.kt)("p",null,"In the page ",(0,a.kt)("inlineCode",{parentName:"p"},"System > Users")," you can create a new user."),(0,a.kt)("p",null,"Note at the bottom, the ",(0,a.kt)("inlineCode",{parentName:"p"},"Entity")," attribute, it's required to put here the entity name matching the one you will use in the workflow definition."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Probably external systems will not be able to use the ",(0,a.kt)("inlineCode",{parentName:"p"},"/login")," API to authenticate. So you will have to generate a token for that user and provide it to the external system.")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Entities should have a very limited role and access rights. They should only be able to perform the actions they are supposed to do.")),(0,a.kt)("h3",{id:"place-an-entity"},"Place an entity"),(0,a.kt)("p",null,"In your workflow, place an entity node with the outputs matching the events you want to receive and manage from the external system."),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("p",null,"The external system will need to call the API ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/v01/transactions/<instence-id>/events")," with the appropriate credentials and body to send the event to the workflow."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},'POST /api/v01/transactions/<instence-id>/events HTTP/1.1\nHost: <your-domain>\nAuthorization: Bearer <token>\nContent-Type: application/json\n\n{\n  "key": "<event-name>",\n  "value": "value"\n}\n')),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"An entity node can be present only once in a workflow. ",(0,a.kt)("em",{parentName:"p"},"But")," it can be called multiple times over the lifecycle of the instance (even with the same event).")))}d.isMDXComponent=!0}}]);