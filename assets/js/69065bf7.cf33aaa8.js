"use strict";(self.webpackChunkapio_core=self.webpackChunkapio_core||[]).push([[8328],{8525:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var o=n(85893),i=n(11151);const a={sidebar_position:2},s="Entities",r={id:"workflows/advanced/entities",title:"Entities",description:"Entities are special nodes that can be used to represent an external process or system which is not managed by APIO but which can interract with the workflow.",source:"@site/docs/workflows/advanced/entities.md",sourceDirName:"workflows/advanced",slug:"/workflows/advanced/entities",permalink:"/apio-core-docs/docs/workflows/advanced/entities",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Manual actions",permalink:"/apio-core-docs/docs/workflows/advanced/manual_actions"},next:{title:"Versions",permalink:"/apio-core-docs/docs/workflows/advanced/versioning"}},c={},d=[{value:"Configuration",id:"configuration",level:2},{value:"Create a user",id:"create-a-user",level:3},{value:"Place an entity",id:"place-an-entity",level:3},{value:"Usage",id:"usage",level:2}];function l(e){const t={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"entities",children:"Entities"}),"\n",(0,o.jsx)(t.p,{children:"Entities are special nodes that can be used to represent an external process or system which is not managed by APIO but which can interract with the workflow."}),"\n",(0,o.jsx)(t.p,{children:"For instance, the workflow contacts some system to order a product. The system accept the order but will send a confirmation later. That confirmation can be provided to the workflow by an entity."}),"\n",(0,o.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsx)(t.h3,{id:"create-a-user",children:"Create a user"}),"\n",(0,o.jsx)(t.p,{children:"To interract with APIO, a system needs to be authenticated. So a particular user is required."}),"\n",(0,o.jsxs)(t.p,{children:["In the page ",(0,o.jsx)(t.code,{children:"System > Users"})," you can create a new user."]}),"\n",(0,o.jsxs)(t.p,{children:["Note at the bottom, the ",(0,o.jsx)(t.code,{children:"Entity"})," attribute, it's required to put here the entity name matching the one you will use in the workflow definition."]}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsxs)(t.p,{children:["Probably external systems will not be able to use the ",(0,o.jsx)(t.code,{children:"/login"})," API to authenticate. So you will have to generate a token for that user and provide it to the external system."]})}),"\n",(0,o.jsx)(t.admonition,{type:"caution",children:(0,o.jsx)(t.p,{children:"Entities should have a very limited role and access rights. They should only be able to perform the actions they are supposed to do."})}),"\n",(0,o.jsx)(t.h3,{id:"place-an-entity",children:"Place an entity"}),"\n",(0,o.jsx)(t.p,{children:"In your workflow, place an entity node with the outputs matching the events you want to receive and manage from the external system."}),"\n",(0,o.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsxs)(t.p,{children:["The external system will need to call the API ",(0,o.jsx)(t.code,{children:"/api/v01/transactions/<instence-id>/events"})," with the appropriate credentials and body to send the event to the workflow."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-http",children:'POST /api/v01/transactions/<instence-id>/events HTTP/1.1\nHost: <your-domain>\nAuthorization: Bearer <token>\nContent-Type: application/json\n\n{\n  "key": "<event-name>",\n  "value": "value"\n}\n'})}),"\n",(0,o.jsx)(t.admonition,{type:"caution",children:(0,o.jsxs)(t.p,{children:["An entity node can be present only once in a workflow. ",(0,o.jsx)(t.em,{children:"But"})," it can be called multiple times over the lifecycle of the instance (even with the same event)."]})})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>s});var o=n(67294);const i={},a=o.createContext(i);function s(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);