"use strict";(self.webpackChunkapio_core=self.webpackChunkapio_core||[]).push([[2123],{51080:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=t(85893),o=t(11151);const i={sidebar_position:1},r="Manual actions",s={id:"workflows/advanced/manual_actions",title:"Manual actions",description:"Manual actions are used to pause the workflow and wait for a user to perform an action.",source:"@site/docs/workflows/advanced/manual_actions.md",sourceDirName:"workflows/advanced",slug:"/workflows/advanced/manual_actions",permalink:"/apio-core-docs/docs/workflows/advanced/manual_actions",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Advanced",permalink:"/apio-core-docs/docs/category/advanced"},next:{title:"Entities",permalink:"/apio-core-docs/docs/workflows/advanced/entities"}},c={},d=[{value:"Configuration",id:"configuration",level:2},{value:"Define a user role",id:"define-a-user-role",level:3},{value:"Assign the role to a user",id:"assign-the-role-to-a-user",level:3},{value:"Add a manual action to your workflow",id:"add-a-manual-action-to-your-workflow",level:3},{value:"Usage",id:"usage",level:2},{value:"Trigger the action",id:"trigger-the-action",level:3},{value:"Actions for not-authenticated users",id:"actions-for-not-authenticated-users",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"manual-actions",children:"Manual actions"}),"\n",(0,a.jsx)(n.p,{children:"Manual actions are used to pause the workflow and wait for a user to perform an action.\nIt might be a approval before accepting an order, or a manual check of a document."}),"\n",(0,a.jsx)(n.p,{children:"A manual action is always assigned to a group of users with a certain role."}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"define-a-user-role",children:"Define a user role"}),"\n",(0,a.jsxs)(n.p,{children:["In the page ",(0,a.jsx)(n.code,{children:"System > Users > Roles"})," you can define a new role."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.img,{alt:"new user role button",src:t(93519).Z+"",title:"new user role button",width:"2114",height:"678"}),"\n",(0,a.jsx)(n.img,{alt:"new user role",src:t(29808).Z+"",title:"new user role",width:"1804",height:"510"})]}),"\n",(0,a.jsx)(n.h3,{id:"assign-the-role-to-a-user",children:"Assign the role to a user"}),"\n",(0,a.jsx)(n.p,{children:"In the user details, go to the tab 'Roles'."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.img,{alt:"check user role",src:t(28862).Z+"",width:"1810",height:"618"}),"\n",(0,a.jsx)(n.img,{alt:"assign user role",src:t(84630).Z+"",width:"1808",height:"570"})]}),"\n",(0,a.jsx)(n.h3,{id:"add-a-manual-action-to-your-workflow",children:"Add a manual action to your workflow"}),"\n",(0,a.jsxs)(n.p,{children:["Use the node ",(0,a.jsx)(n.a,{href:"../nodes#trigger-manual-action",children:"manual action"})," with the appropriate role."]}),"\n",(0,a.jsx)(n.p,{children:"The node can be configured to send a mail notification to users with that role when the action is triggered."}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.p,{children:"When the workflow reaches the manual action, it will pause and wait for a user with the appropriate role to perform the action."}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsx)(n.p,{children:"Because the manual actions are asynchronous by nature, it's recommended to not link that workflow to a synchronous route / process."})}),"\n",(0,a.jsx)(n.h3,{id:"trigger-the-action",children:"Trigger the action"}),"\n",(0,a.jsx)(n.p,{children:"The action can be triggered in two ways:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"By clicking on the button in the workflow details page"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"action-required",src:t(69382).Z+"",width:"563",height:"677"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"By clicking a link (or a button) which route the user to perform the action"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"This requires the user to be authenticated and allowed to perform the action."}),"\n",(0,a.jsx)(n.p,{children:"The link has to have the following format:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"https://<your-domain>/transactions/<instance-id>/action/<action-id>?output=<answer>\n"})}),"\n",(0,a.jsx)(n.p,{children:"When the action is triggered, the workflow will continue. The action is marked as completed and the user who triggered the action is recorded."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"action-triggered",src:t(44357).Z+"",width:"1044",height:"707"})}),"\n",(0,a.jsx)(n.h2,{id:"actions-for-not-authenticated-users",children:"Actions for not-authenticated users"}),"\n",(0,a.jsx)(n.p,{children:"Sometimes, you might want to allow not-authenticated users to perform an action."}),"\n",(0,a.jsxs)(n.p,{children:["In that case, the workflow has to first ",(0,a.jsx)(n.a,{href:"../nodes#generate-ott",children:"generate an ott"})," for a manual action and link it the manual action node with the ",(0,a.jsx)(n.code,{children:"link_ott_context_key"})," field."]}),"\n",(0,a.jsx)(n.p,{children:"Then, the link to trigger the action has to be generated with the following format:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"https://<your-domain>/api/v01/transactions/manual_actions?output=<answer>&ott=<ott>\n"})}),"\n",(0,a.jsx)(n.p,{children:"When the action is triggered, the workflow will continue. The action is marked as completed."}),"\n",(0,a.jsx)(n.admonition,{type:"caution",children:(0,a.jsx)(n.p,{children:"OTT have to be used with caution as they are not authenticated and can be used by anyone."})})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},84630:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/assign-user-role-720da8ec33edb4b6d1828dbcb82586cd.png"},28862:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/check-user-role-tab-f5fa42df7ceeea6ad344c6b4881bb553.png"},93519:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/new-user-role-button-65c9677907b732d00cbd0ab4f3927a36.png"},29808:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/new-user-role-2371ad19e8bd1b18bb2a1df23d6c404a.png"},69382:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/request-action-required-6225d0056516f09001de235e2064bbca.png"},44357:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/request-action-trigger-d0080aa306cd34458ab5b2e2f9c797c6.png"},11151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>r});var a=t(67294);const o={},i=a.createContext(o);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);